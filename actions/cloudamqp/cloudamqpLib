var http = require("http");

function buildExchangeName(authKey, channelName) {
    return btoa(authKey) + "-" + channelName;
}

function buildVirtualHostName(authKey, clusterName) {
    return btoa(authKey + "@" + clusterName);
}

function buildAmqpUsername(authKey, deviceId, clusterName) {
    return btoa(authKey + ":" + deviceId + "@" + clusterName);
}

function buildAmqpPassword(authKey, deviceId, deviceToken) {
    return btoa(authKey + ":" + deviceId + ":" + deviceToken);
}

function buildAmqpApiAuthorization(username, password) {
    return "Basic " + btoa(username + ":" + password);
}

function amqpApi(baseUrl, api, authorization) {
	var params = {
		"url" : baseUrl + "/api/" + api,
		"headers" : {
			"Authorization" : authorization
		}
	}
	var response = http.request(params);
	return JSON.parse(response.body);
}